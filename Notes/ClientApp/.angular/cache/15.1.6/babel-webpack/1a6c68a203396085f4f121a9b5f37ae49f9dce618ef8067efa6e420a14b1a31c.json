{"ast":null,"code":"import { map } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/auth.service\";\nexport class CustomValidators {\n  constructor(authService) {\n    this.authService = authService;\n  }\n  uniqueEmailValidator() {\n    return control => {\n      return this.authService.getUser(email).pipe(map(userEmail => {\n        return userEmail && userEmail !== email ? {\n          \"uniqueEmail\": true\n        } : null;\n      }));\n    };\n  }\n}\nCustomValidators.ɵfac = function CustomValidators_Factory(t) {\n  return new (t || CustomValidators)(i0.ɵɵinject(i1.AuthService));\n};\nCustomValidators.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: CustomValidators,\n  factory: CustomValidators.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AAEA,SAAqBA,GAAG,QAAQ,MAAM;;;AAItC,OAAM,MAAOC,gBAAgB;EAEzBC,YAAoBC,WAAuB;IAAvB,gBAAW,GAAXA,WAAW;EAAc;EAE7CC,oBAAoB;IAChB,OAAQC,OAAwB,IAA2E;MACvG,OAAO,IAAI,CAACF,WAAW,CAACG,OAAO,CAACC,KAAK,CAAC,CAACC,IAAI,CAACR,GAAG,CAACS,SAAS,IAAE;QACvD,OAAOA,SAAS,IAAIA,SAAS,KAAGF,KAAK,GAAC;UAAE,aAAa,EAAC;QAAI,CAAE,GAAC,IAAI;MACrE,CAAC,CAAC,CAAC;IACP,CAAC;EACL;;AAVSN,gBAAgB;mBAAhBA,gBAAgB;AAAA;AAAhBA,gBAAgB;SAAhBA,gBAAgB;EAAAS,SAAhBT,gBAAgB;EAAAU,YADL;AAAM","names":["map","CustomValidators","constructor","authService","uniqueEmailValidator","control","getUser","email","pipe","userEmail","factory","providedIn"],"sourceRoot":"","sources":["D:\\mine\\projects\\dotnet-angular\\Notes\\Notes\\ClientApp\\src\\app\\directives\\custom-validator.directive.ts"],"sourcesContent":["import { AbstractControl, ValidationErrors, AsyncValidatorFn } from '@angular/forms';\r\nimport { Directive, Injectable } from \"@angular/core\";\r\nimport { Observable, map } from 'rxjs';\r\nimport { AuthService } from '../services/auth.service';\r\n\r\n@Injectable({providedIn:'root'})\r\nexport class CustomValidators{\r\n    \r\n    constructor(private authService:AuthService){}\r\n\r\n    uniqueEmailValidator():AsyncValidatorFn{\r\n        return (control: AbstractControl): Promise<ValidationErrors | null> | Observable<ValidationErrors | null>=>{\r\n            return this.authService.getUser(email).pipe(map(userEmail=>{\r\n                return userEmail && userEmail!==email?{ \"uniqueEmail\":true }:null;\r\n            }))\r\n        }\r\n    }\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}