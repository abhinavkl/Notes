{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Injectable } from \"@angular/core\";\nimport { map } from 'rxjs';\nlet CustomValidators = class CustomValidators {\n  constructor(authService) {\n    this.authService = authService;\n  }\n  uniqueEmailValidator() {\n    return control => {\n      return this.authService.getUser(control.value).pipe(map(unique => {\n        return unique ? {\n          \"uniqueEmail\": true\n        } : null;\n      }));\n    };\n  }\n};\nCustomValidators = __decorate([Injectable({\n  providedIn: 'root'\n})], CustomValidators);\nexport { CustomValidators };","map":{"version":3,"mappings":";AACA,SAAoBA,UAAU,QAAQ,eAAe;AACrD,SAAqBC,GAAG,QAAQ,MAAM;AAG/B,IAAMC,gBAAgB,GAAtB,MAAMA,gBAAgB;EAEzBC,YAAoBC,WAAuB;IAAvB,gBAAW,GAAXA,WAAW;EAAc;EAE7CC,oBAAoB;IAChB,OAAQC,OAAwB,IAA2E;MACvG,OAAO,IAAI,CAACF,WAAW,CAACG,OAAO,CAACD,OAAO,CAACE,KAAK,CAAC,CAACC,IAAI,CAACR,GAAG,CAACS,MAAM,IAAE;QAC5D,OAAOA,MAAM,GAAC;UAAE,aAAa,EAAC;QAAI,CAAE,GAAC,IAAI;MAC7C,CAAC,CAAC,CAAC;IACP,CAAC;EACL;CAEH;AAZYR,gBAAgB,eAD5BF,UAAU,CAAC;EAACW,UAAU,EAAC;AAAM,CAAC,CAAC,GACnBT,gBAAgB,CAY5B;SAZYA,gBAAgB","names":["Injectable","map","CustomValidators","constructor","authService","uniqueEmailValidator","control","getUser","value","pipe","unique","providedIn"],"sourceRoot":"","sources":["D:\\mine\\projects\\dotnet-angular\\Notes\\Notes\\ClientApp\\src\\app\\directives\\custom-validator.directive.ts"],"sourcesContent":["import { AbstractControl, ValidationErrors, AsyncValidatorFn } from '@angular/forms';\r\nimport { Directive, Injectable } from \"@angular/core\";\r\nimport { Observable, map } from 'rxjs';\r\n\r\n@Injectable({providedIn:'root'})\r\nexport class CustomValidators{\r\n    \r\n    constructor(private authService:AuthService){}\r\n\r\n    uniqueEmailValidator():AsyncValidatorFn{\r\n        return (control: AbstractControl): Promise<ValidationErrors | null> | Observable<ValidationErrors | null>=>{\r\n            return this.authService.getUser(control.value).pipe(map(unique=>{\r\n                return unique?{ \"uniqueEmail\":true }:null;\r\n            }))\r\n        }\r\n    }\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}