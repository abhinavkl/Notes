{"ast":null,"code":"import { UserDetails } from '../auth/user.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class AuthService {\n  constructor(http, baseUrl) {\n    this.http = http;\n    this.baseUrl = '';\n    this.isAuthenticated = false;\n    this.userDetails = UserDetails.default;\n    this.baseUrl = baseUrl;\n  }\n  getUser(email) {\n    return this.http.get(this.baseUrl + 'register?email=' + email);\n  }\n  registerUser(register) {\n    return this.http.post(this.baseUrl + 'register', register);\n  }\n  loginUser(login) {\n    return this.http.post(this.baseUrl + 'login', login);\n  }\n  logout() {\n    return this.http.post(this.baseUrl + 'logout', {});\n  }\n  getUserSession() {\n    return this.http.get(this.baseUrl + 'login');\n  }\n  setIsAuthenticate(value) {\n    this.isAuthenticated = value;\n    if (value) {\n      this.timer = setTimeout(() => {\n        this.logout();\n        this.setIsAuthenticate(false);\n      }, 900000);\n    } else {\n      clearTimeout(this.timer);\n    }\n  }\n  setSessionTimer(timeleft) {\n    this.timer = setTimeout(() => {\n      this.logout();\n      this.setIsAuthenticate(false);\n    }, timeleft);\n  }\n  get authenticated() {\n    return this.isAuthenticated;\n  }\n  setUserDetails(details) {\n    this.userDetails = details;\n  }\n  get userDetails() {\n    return this.userDetails;\n  }\n}\nAuthService.ɵfac = function AuthService_Factory(t) {\n  return new (t || AuthService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject('BASE_URL'));\n};\nAuthService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AuthService,\n  factory: AuthService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AAMA,SAASA,WAAW,QAAqB,oBAAoB;;;AAG7D,OAAM,MAAOC,WAAW;EAMpBC,YAAoBC,IAAe,EAAqBC,OAAe;IAAnD,SAAI,GAAJD,IAAI;IALxB,YAAO,GAAC,EAAE;IACF,oBAAe,GAAC,KAAK;IAErB,gBAAW,GAACH,WAAW,CAACK,OAAO;IAInC,IAAI,CAACD,OAAO,GAACA,OAAO;EACxB;EAEAE,OAAO,CAACC,KAAY;IAChB,OAAO,IAAI,CAACJ,IAAI,CAACK,GAAG,CAAU,IAAI,CAACJ,OAAO,GAAC,iBAAiB,GAACG,KAAK,CAAC;EACvE;EAEAE,YAAY,CAACC,QAAiB;IAC1B,OAAO,IAAI,CAACP,IAAI,CAACQ,IAAI,CAAkB,IAAI,CAACP,OAAO,GAAC,UAAU,EAACM,QAAQ,CAAC;EAC5E;EAEAE,SAAS,CAACC,KAAW;IACjB,OAAO,IAAI,CAACV,IAAI,CAACQ,IAAI,CAAkB,IAAI,CAACP,OAAO,GAAC,OAAO,EAACS,KAAK,CAAC;EACtE;EAEAC,MAAM;IACF,OAAO,IAAI,CAACX,IAAI,CAACQ,IAAI,CAAC,IAAI,CAACP,OAAO,GAAC,QAAQ,EAAC,EAAE,CAAC;EACnD;EAEAW,cAAc;IACV,OAAO,IAAI,CAACZ,IAAI,CAACK,GAAG,CAAc,IAAI,CAACJ,OAAO,GAAC,OAAO,CAAC;EAC3D;EAEAY,iBAAiB,CAACC,KAAa;IAC3B,IAAI,CAACC,eAAe,GAACD,KAAK;IAC1B,IAAGA,KAAK,EAAC;MACL,IAAI,CAACE,KAAK,GAACC,UAAU,CAAC,MAAI;QACtB,IAAI,CAACN,MAAM,EAAE;QACb,IAAI,CAACE,iBAAiB,CAAC,KAAK,CAAC;MACjC,CAAC,EAAC,MAAM,CAAC;KACZ,MACG;MACAK,YAAY,CAAC,IAAI,CAACF,KAAK,CAAC;;EAEhC;EAEAG,eAAe,CAACC,QAAe;IAC3B,IAAI,CAACJ,KAAK,GAACC,UAAU,CAAC,MAAI;MACtB,IAAI,CAACN,MAAM,EAAE;MACb,IAAI,CAACE,iBAAiB,CAAC,KAAK,CAAC;IACjC,CAAC,EAACO,QAAQ,CAAC;EACf;EAEA,IAAIC,aAAa;IACb,OAAO,IAAI,CAACN,eAAe;EAC/B;EAEAO,cAAc,CAACC,OAAmB;IAC9B,IAAI,CAACC,WAAW,GAACD,OAAO;EAC5B;EAEA,IAAIC,WAAW;IACX,OAAO,IAAI,CAACA,WAAW;EAC3B;;AA7DS1B,WAAW;mBAAXA,WAAW,0CAMwB,UAAU;AAAA;AAN7CA,WAAW;SAAXA,WAAW;EAAA2B,SAAX3B,WAAW;EAAA4B,YADA;AAAM","names":["UserDetails","AuthService","constructor","http","baseUrl","default","getUser","email","get","registerUser","register","post","loginUser","login","logout","getUserSession","setIsAuthenticate","value","isAuthenticated","timer","setTimeout","clearTimeout","setSessionTimer","timeleft","authenticated","setUserDetails","details","userDetails","factory","providedIn"],"sourceRoot":"","sources":["D:\\mine\\projects\\dotnet-angular\\Notes\\Notes\\ClientApp\\src\\app\\components\\auth\\auth.service.ts"],"sourcesContent":["import { HttpClient } from \"@angular/common/http\";\r\nimport { Inject, Injectable } from \"@angular/core\";\r\nimport { ServerModule } from \"@angular/platform-server\";\r\nimport { Register } from \"./register/register.model\";\r\nimport { Login } from \"./login/login.model\";\r\nimport { ResponseMessage } from \"src/app/shared/response-message.model\";\r\nimport { UserDetails, UserSession } from '../auth/user.model';\r\n\r\n@Injectable({providedIn:'root'})\r\nexport class AuthService{\r\n    baseUrl='';\r\n    private isAuthenticated=false;\r\n    private timer?:ReturnType<typeof setTimeout>;\r\n    private userDetails=UserDetails.default;\r\n\r\n    constructor(private http:HttpClient,@Inject('BASE_URL') baseUrl: string)\r\n    {\r\n        this.baseUrl=baseUrl;\r\n    }\r\n\r\n    getUser(email:string){\r\n        return this.http.get<boolean>(this.baseUrl+'register?email='+email)\r\n    }\r\n\r\n    registerUser(register:Register){\r\n        return this.http.post<ResponseMessage>(this.baseUrl+'register',register)\r\n    }\r\n\r\n    loginUser(login:Login){\r\n        return this.http.post<ResponseMessage>(this.baseUrl+'login',login)\r\n    }\r\n\r\n    logout(){\r\n        return this.http.post(this.baseUrl+'logout',{})\r\n    }\r\n\r\n    getUserSession(){\r\n        return this.http.get<UserSession>(this.baseUrl+'login')\r\n    }\r\n\r\n    setIsAuthenticate(value:boolean){\r\n        this.isAuthenticated=value;\r\n        if(value){\r\n            this.timer=setTimeout(()=>{\r\n                this.logout()\r\n                this.setIsAuthenticate(false)\r\n            },900000)    \r\n        }\r\n        else{\r\n            clearTimeout(this.timer)\r\n        }\r\n    }\r\n\r\n    setSessionTimer(timeleft:number){\r\n        this.timer=setTimeout(()=>{\r\n            this.logout()\r\n            this.setIsAuthenticate(false)\r\n        },timeleft)\r\n    }\r\n\r\n    get authenticated(){\r\n        return this.isAuthenticated;\r\n    }\r\n\r\n    setUserDetails(details:UserDetails){\r\n        this.userDetails=details;\r\n    }\r\n\r\n    get userDetails(){\r\n        return this.userDetails;\r\n    }\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}